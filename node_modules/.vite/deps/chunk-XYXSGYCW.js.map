{
  "version": 3,
  "sources": ["../../src/focustrap/style/FocusTrapStyle.js", "../../src/focustrap/BaseFocusTrap.js", "../../src/focustrap/FocusTrap.js"],
  "sourcesContent": ["import BaseStyle from '@primevue/core/base/style';\n\nexport default BaseStyle.extend({\n    name: 'focustrap-directive'\n});\n", "import BaseDirective from '@primevue/core/basedirective';\nimport FocusTrapStyle from 'primevue/focustrap/style';\n\nconst BaseFocusTrap = BaseDirective.extend({\n    style: FocusTrapStyle\n});\n\nexport default BaseFocusTrap;\n", "import { DomHandler, ObjectUtils } from '@primevue/core/utils';\nimport BaseFocusTrap from './BaseFocusTrap';\n\nconst FocusTrap = BaseFocusTrap.extend('focustrap', {\n    mounted(el, binding) {\n        const { disabled } = binding.value || {};\n\n        if (!disabled) {\n            this.createHiddenFocusableElements(el, binding);\n            this.bind(el, binding);\n            this.autoElementFocus(el, binding);\n        }\n\n        el.setAttribute('data-pd-focustrap', true);\n\n        this.$el = el;\n    },\n    updated(el, binding) {\n        const { disabled } = binding.value || {};\n\n        disabled && this.unbind(el);\n    },\n    unmounted(el) {\n        this.unbind(el);\n    },\n    methods: {\n        getComputedSelector(selector) {\n            return `:not(.p-hidden-focusable):not([data-p-hidden-focusable=\"true\"])${selector ?? ''}`;\n        },\n        bind(el, binding) {\n            const { onFocusIn, onFocusOut } = binding.value || {};\n\n            el.$_pfocustrap_mutationobserver = new MutationObserver((mutationList) => {\n                mutationList.forEach((mutation) => {\n                    if (mutation.type === 'childList' && !el.contains(document.activeElement)) {\n                        const findNextFocusableElement = (_el) => {\n                            const focusableElement = DomHandler.isFocusableElement(_el)\n                                ? DomHandler.isFocusableElement(_el, this.getComputedSelector(el.$_pfocustrap_focusableselector))\n                                    ? _el\n                                    : DomHandler.getFirstFocusableElement(el, this.getComputedSelector(el.$_pfocustrap_focusableselector))\n                                : DomHandler.getFirstFocusableElement(_el);\n\n                            return ObjectUtils.isNotEmpty(focusableElement) ? focusableElement : _el.nextSibling && findNextFocusableElement(_el.nextSibling);\n                        };\n\n                        DomHandler.focus(findNextFocusableElement(mutation.nextSibling));\n                    }\n                });\n            });\n\n            el.$_pfocustrap_mutationobserver.disconnect();\n            el.$_pfocustrap_mutationobserver.observe(el, {\n                childList: true\n            });\n\n            el.$_pfocustrap_focusinlistener = (event) => onFocusIn && onFocusIn(event);\n            el.$_pfocustrap_focusoutlistener = (event) => onFocusOut && onFocusOut(event);\n\n            el.addEventListener('focusin', el.$_pfocustrap_focusinlistener);\n            el.addEventListener('focusout', el.$_pfocustrap_focusoutlistener);\n        },\n        unbind(el) {\n            el.$_pfocustrap_mutationobserver && el.$_pfocustrap_mutationobserver.disconnect();\n            el.$_pfocustrap_focusinlistener && el.removeEventListener('focusin', el.$_pfocustrap_focusinlistener) && (el.$_pfocustrap_focusinlistener = null);\n            el.$_pfocustrap_focusoutlistener && el.removeEventListener('focusout', el.$_pfocustrap_focusoutlistener) && (el.$_pfocustrap_focusoutlistener = null);\n        },\n        autoFocus(options) {\n            this.autoElementFocus(this.$el, { value: { ...options, autoFocus: true } });\n        },\n        autoElementFocus(el, binding) {\n            const { autoFocusSelector = '', firstFocusableSelector = '', autoFocus = false } = binding.value || {};\n            let focusableElement = DomHandler.getFirstFocusableElement(el, `[autofocus]${this.getComputedSelector(autoFocusSelector)}`);\n\n            autoFocus && !focusableElement && (focusableElement = DomHandler.getFirstFocusableElement(el, this.getComputedSelector(firstFocusableSelector)));\n            DomHandler.focus(focusableElement);\n        },\n        onFirstHiddenElementFocus(event) {\n            const { currentTarget, relatedTarget } = event;\n            const focusableElement =\n                relatedTarget === currentTarget.$_pfocustrap_lasthiddenfocusableelement || !this.$el?.contains(relatedTarget)\n                    ? DomHandler.getFirstFocusableElement(currentTarget.parentElement, this.getComputedSelector(currentTarget.$_pfocustrap_focusableselector))\n                    : currentTarget.$_pfocustrap_lasthiddenfocusableelement;\n\n            DomHandler.focus(focusableElement);\n        },\n        onLastHiddenElementFocus(event) {\n            const { currentTarget, relatedTarget } = event;\n            const focusableElement =\n                relatedTarget === currentTarget.$_pfocustrap_firsthiddenfocusableelement || !this.$el?.contains(relatedTarget)\n                    ? DomHandler.getLastFocusableElement(currentTarget.parentElement, this.getComputedSelector(currentTarget.$_pfocustrap_focusableselector))\n                    : currentTarget.$_pfocustrap_firsthiddenfocusableelement;\n\n            DomHandler.focus(focusableElement);\n        },\n        createHiddenFocusableElements(el, binding) {\n            const { tabIndex = 0, firstFocusableSelector = '', lastFocusableSelector = '' } = binding.value || {};\n\n            const createFocusableElement = (onFocus) => {\n                return DomHandler.createElement('span', {\n                    class: 'p-hidden-accessible p-hidden-focusable',\n                    tabIndex,\n                    role: 'presentation',\n                    'aria-hidden': true,\n                    'data-p-hidden-accessible': true,\n                    'data-p-hidden-focusable': true,\n                    onFocus: onFocus?.bind(this)\n                });\n            };\n\n            const firstFocusableElement = createFocusableElement(this.onFirstHiddenElementFocus);\n            const lastFocusableElement = createFocusableElement(this.onLastHiddenElementFocus);\n\n            firstFocusableElement.$_pfocustrap_lasthiddenfocusableelement = lastFocusableElement;\n            firstFocusableElement.$_pfocustrap_focusableselector = firstFocusableSelector;\n            firstFocusableElement.setAttribute('data-pc-section', 'firstfocusableelement');\n\n            lastFocusableElement.$_pfocustrap_firsthiddenfocusableelement = firstFocusableElement;\n            lastFocusableElement.$_pfocustrap_focusableselector = lastFocusableSelector;\n            lastFocusableElement.setAttribute('data-pc-section', 'lastfocusableelement');\n\n            el.prepend(firstFocusableElement);\n            el.append(lastFocusableElement);\n        }\n    }\n});\n\nexport default FocusTrap;\n"],
  "mappings": ";;;;;;;;;;;;AAEA,IAAA,iBAAeA,UAAUC,OAAO;EAC5BC,MAAM;AACV,CAAC;;;ACDD,IAAMC,gBAAgBC,cAAcC,OAAO;EACvCC,OAAOC;AACX,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACFD,IAAMC,YAAYL,cAAcE,OAAO,aAAa;EAChDI,SAAOA,SAAAA,QAACC,IAAIC,SAAS;AACjB,QAAAC,OAAqBD,QAAQE,SAAS,CAAA,GAA9BC,WAAQF,KAARE;AAER,QAAI,CAACA,UAAU;AACX,WAAKC,8BAA8BL,IAAIC,OAAO;AAC9C,WAAKK,KAAKN,IAAIC,OAAO;AACrB,WAAKM,iBAAiBP,IAAIC,OAAO;IACrC;AAEAD,OAAGQ,aAAa,qBAAqB,IAAI;AAEzC,SAAKC,MAAMT;;EAEfU,SAAOA,SAAAA,QAACV,IAAIC,SAAS;AACjB,QAAAU,QAAqBV,QAAQE,SAAS,CAAA,GAA9BC,WAAQO,MAARP;AAERA,gBAAY,KAAKQ,OAAOZ,EAAE;;EAE9Ba,WAAS,SAAAA,UAACb,IAAI;AACV,SAAKY,OAAOZ,EAAE;;EAElBc,SAAS;IACLC,qBAAmB,SAAAA,oBAACC,UAAU;AAC1B,aAAAC,kEAAAA,OAAyED,aAAQ,QAARA,aAAAA,SAAAA,WAAY,EAAE;;IAE3FV,MAAIA,SAAAA,KAACN,IAAIC,SAAS;AAAA,UAAAiB,QAAA;AACd,UAAAC,QAAkClB,QAAQE,SAAS,CAAA,GAA3CiB,YAASD,MAATC,WAAWC,aAAUF,MAAVE;AAEnBrB,SAAGsB,gCAAgC,IAAIC,iBAAiB,SAACC,cAAiB;AACtEA,qBAAaC,QAAQ,SAACC,UAAa;AAC/B,cAAIA,SAASC,SAAS,eAAe,CAAC3B,GAAG4B,SAASC,SAASC,aAAa,GAAG;AACvE,gBAAMC,2BAA2B,SAA3BA,0BAA4BC,KAAQ;AACtC,kBAAMC,mBAAmBC,WAAWC,mBAAmBH,GAAG,IACpDE,WAAWC,mBAAmBH,KAAKd,MAAKH,oBAAoBf,GAAGoC,8BAA8B,CAAC,IAC1FJ,MACAE,WAAWG,yBAAyBrC,IAAIkB,MAAKH,oBAAoBf,GAAGoC,8BAA8B,CAAC,IACvGF,WAAWG,yBAAyBL,GAAG;AAE7C,qBAAOM,YAAYC,WAAWN,gBAAgB,IAAIA,mBAAmBD,IAAIQ,eAAeT,0BAAyBC,IAAIQ,WAAW;;AAGpIN,uBAAWO,MAAMV,yBAAyBL,SAASc,WAAW,CAAC;UACnE;QACJ,CAAC;MACL,CAAC;AAEDxC,SAAGsB,8BAA8BoB,WAAU;AAC3C1C,SAAGsB,8BAA8BqB,QAAQ3C,IAAI;QACzC4C,WAAW;MACf,CAAC;AAED5C,SAAG6C,+BAA+B,SAACC,OAAK;AAAA,eAAK1B,aAAaA,UAAU0B,KAAK;MAAC;AAC1E9C,SAAG+C,gCAAgC,SAACD,OAAK;AAAA,eAAKzB,cAAcA,WAAWyB,KAAK;MAAC;AAE7E9C,SAAGgD,iBAAiB,WAAWhD,GAAG6C,4BAA4B;AAC9D7C,SAAGgD,iBAAiB,YAAYhD,GAAG+C,6BAA6B;;IAEpEnC,QAAM,SAAAA,OAACZ,IAAI;AACPA,SAAGsB,iCAAiCtB,GAAGsB,8BAA8BoB,WAAU;AAC/E1C,SAAG6C,gCAAgC7C,GAAGiD,oBAAoB,WAAWjD,GAAG6C,4BAA4B,MAAM7C,GAAG6C,+BAA+B;AAC5I7C,SAAG+C,iCAAiC/C,GAAGiD,oBAAoB,YAAYjD,GAAG+C,6BAA6B,MAAM/C,GAAG+C,gCAAgC;;IAEpJG,WAAS,SAAAA,UAACC,SAAS;AACf,WAAK5C,iBAAiB,KAAKE,KAAK;QAAEN,OAAKiD,cAAAA,cAAA,CAAA,GAAOD,OAAO,GAAA,CAAA,GAAA;UAAED,WAAW;QAAI,CAAA;MAAG,CAAC;;IAE9E3C,kBAAgBA,SAAAA,iBAACP,IAAIC,SAAS;AAC1B,UAAAoD,QAAmFpD,QAAQE,SAAS,CAAA,GAAEmD,wBAAAD,MAA9FE,mBAAAA,oBAAiBD,0BAAG,SAAA,KAAEA,uBAAAE,wBAAAH,MAAEI,wBAAAA,yBAAsBD,0BAAG,SAAA,KAAEA,uBAAAE,kBAAAL,MAAEH,WAAAA,aAASQ,oBAAG,SAAA,QAAKA;AAC9E,UAAIzB,mBAAmBC,WAAWG,yBAAyBrC,IAAE,cAAAiB,OAAgB,KAAKF,oBAAoBwC,iBAAiB,CAAC,CAAE;AAE1HL,MAAAA,cAAa,CAACjB,qBAAqBA,mBAAmBC,WAAWG,yBAAyBrC,IAAI,KAAKe,oBAAoB0C,sBAAsB,CAAC;AAC9IvB,iBAAWO,MAAMR,gBAAgB;;IAErC0B,2BAAyB,SAAAA,0BAACb,OAAO;AAAA,UAAAc;AAC7B,UAAQC,gBAAiCf,MAAjCe,eAAeC,gBAAkBhB,MAAlBgB;AACvB,UAAM7B,mBACF6B,kBAAkBD,cAAcE,2CAA2C,GAAAH,YAAC,KAAKnD,SAAGmD,QAAAA,cAAA,UAARA,UAAUhC,SAASkC,aAAa,KACtG5B,WAAWG,yBAAyBwB,cAAcG,eAAe,KAAKjD,oBAAoB8C,cAAczB,8BAA8B,CAAC,IACvIyB,cAAcE;AAExB7B,iBAAWO,MAAMR,gBAAgB;;IAErCgC,0BAAwB,SAAAA,yBAACnB,OAAO;AAAA,UAAAoB;AAC5B,UAAQL,gBAAiCf,MAAjCe,eAAeC,gBAAkBhB,MAAlBgB;AACvB,UAAM7B,mBACF6B,kBAAkBD,cAAcM,4CAA4C,GAAAD,aAAC,KAAKzD,SAAGyD,QAAAA,eAAA,UAARA,WAAUtC,SAASkC,aAAa,KACvG5B,WAAWkC,wBAAwBP,cAAcG,eAAe,KAAKjD,oBAAoB8C,cAAczB,8BAA8B,CAAC,IACtIyB,cAAcM;AAExBjC,iBAAWO,MAAMR,gBAAgB;;IAErC5B,+BAA6BA,SAAAA,8BAACL,IAAIC,SAAS;AAAA,UAAAoE,SAAA;AACvC,UAAAC,QAAkFrE,QAAQE,SAAS,CAAA,GAAEoE,iBAAAD,MAA7FE,UAAAA,WAAQD,mBAAG,SAAA,IAACA,gBAAAE,wBAAAH,MAAEb,wBAAAA,yBAAsBgB,0BAAG,SAAA,KAAEA,uBAAAC,wBAAAJ,MAAEK,uBAAAA,wBAAqBD,0BAAG,SAAA,KAAEA;AAE7E,UAAME,yBAAyB,SAAzBA,wBAA0BC,SAAY;AACxC,eAAO3C,WAAW4C,cAAc,QAAQ;UACpC,SAAO;UACPN;UACAO,MAAM;UACN,eAAe;UACf,4BAA4B;UAC5B,2BAA2B;UAC3BF,SAASA,YAAAA,QAAAA,YAAO,SAAA,SAAPA,QAASvE,KAAK+D,MAAI;QAC/B,CAAC;;AAGL,UAAMW,wBAAwBJ,uBAAuB,KAAKjB,yBAAyB;AACnF,UAAMsB,uBAAuBL,uBAAuB,KAAKX,wBAAwB;AAEjFe,4BAAsBjB,0CAA0CkB;AAChED,4BAAsB5C,iCAAiCqB;AACvDuB,4BAAsBxE,aAAa,mBAAmB,uBAAuB;AAE7EyE,2BAAqBd,2CAA2Ca;AAChEC,2BAAqB7C,iCAAiCuC;AACtDM,2BAAqBzE,aAAa,mBAAmB,sBAAsB;AAE3ER,SAAGkF,QAAQF,qBAAqB;AAChChF,SAAGmF,OAAOF,oBAAoB;IAClC;EACJ;AACJ,CAAC;",
  "names": ["BaseStyle", "extend", "name", "BaseFocusTrap", "BaseDirective", "extend", "style", "FocusTrapStyle", "FocusTrap", "mounted", "el", "binding", "_ref", "value", "disabled", "createHiddenFocusableElements", "bind", "autoElementFocus", "setAttribute", "$el", "updated", "_ref2", "unbind", "unmounted", "methods", "getComputedSelector", "selector", "concat", "_this", "_ref3", "onFocusIn", "onFocusOut", "$_pfocustrap_mutationobserver", "MutationObserver", "mutationList", "forEach", "mutation", "type", "contains", "document", "activeElement", "findNextFocusableElement", "_el", "focusableElement", "DomHandler", "isFocusableElement", "$_pfocustrap_focusableselector", "getFirstFocusableElement", "ObjectUtils", "isNotEmpty", "nextSibling", "focus", "disconnect", "observe", "childList", "$_pfocustrap_focusinlistener", "event", "$_pfocustrap_focusoutlistener", "addEventListener", "removeEventListener", "autoFocus", "options", "_objectSpread", "_ref4", "_ref4$autoFocusSelect", "autoFocusSelector", "_ref4$firstFocusableS", "firstFocusableSelector", "_ref4$autoFocus", "onFirstHiddenElementFocus", "_this$$el", "currentTarget", "relatedTarget", "$_pfocustrap_lasthiddenfocusableelement", "parentElement", "onLastHiddenElementFocus", "_this$$el2", "$_pfocustrap_firsthiddenfocusableelement", "getLastFocusableElement", "_this2", "_ref5", "_ref5$tabIndex", "tabIndex", "_ref5$firstFocusableS", "_ref5$lastFocusableSe", "lastFocusableSelector", "createFocusableElement", "onFocus", "createElement", "role", "firstFocusableElement", "lastFocusableElement", "prepend", "append"]
}
